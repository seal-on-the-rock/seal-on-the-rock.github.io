
---
layout: post
title: "article0002"
date: 2025-10-13
author: Seal
---

# ☁️ article0002　AWSのネットワーク２


今日も前回を続いてAWSのネットワーク関連知識を紹介します。

１．プライベートサブネットのEC2はどうやってインターネットにアクセスしますか？

答えはNAT Gatewayです。

下記のイメージの通り、
先ずは、パブリックサブネットにNATGWを設置します。
　　PS：NATGWを設置するときは、必ずEIPを割り当てる必要があります。
　　　　EIPはNATGWに固定パブリックIPを提供します。
　　　　このパブリックIPは外部ユーザーが見ているIPです。

後は、プライベートサブネットのRoute Tableに「インターネットへアクセスするためのターゲットがNATGWである」を設定します。

そうしたら、プライベートサブネットのEC2がインターネットにアクセスすることが可能になります。

![プライベートサブネットのEC2の通信フロー]( /assets/images/0002-1.png )

補充説明：


もし文字トポロジー図でEC2がインターネットにアクセスすることを表示すれば、下記のようになります。


---


「Private Subnet」

      EC2 
      
       （ENI：10.0.2.1）
       
           (Route Table:　0.0.0.0/0　→　NATGW)
           
      ↓
      
「Public　Subnet」

　　　NATGW
   
　　　　（ENI：10.0.1.100）
    
        　　（Elastic　IP　：　52.20.20.20）
          
　　　　　　（Route Table:　0.0.0.0/0　→　IGW）
      
      ↓
      
　　　IGW
   
　　　↓
   
　　Internet


---

補充説明：

⑴　ENIの説明：
　　AWSの色んなリソース（EC2,NATGW,ALBなど）はSubnetと繋がるのは必ずENIが必要です。
　　ENIはAWSが提供した専有名前です。
　　ENI　＝　Elastic　Network　Intarface

　　そもそもNetwork　Intarface　Cardという概念があるですよね。
　　AWSはそれに基づいてENI（つまり、ElasticなNetwork　Intarface　Card）を提出しました。
    　　PS：ENIがAWSブランドのNICだという理解すればいいと思います。
　　　　　　また類似なものですが、Route53がAWSブランドのDNSです

⑵　Route Tableの説明：
　　・プライベートサブネットのRoute Tableに「インターネットにアクセスしたくければ、ターゲットがNATGWです」を書いております。
　　　　0.0.0.0/0 → nat-xxxxxxxx

　　・パブリックサブネットのRoute Tableに「インターネットにアクセスしたくければ、ターゲットがIGWです」を書いております。
　　　　0.0.0.0/0 → igw-xxxxxxxx

⑶　EIPの説明：
　　固定IPを提供するサービスです。NATGWを作成するときは、必ずEIPを割り当てることが必要です。
　　AWSの他のリソースとEIPの関係については、下表を参照できます。

| AWSリソース | EIP | 説明 | 
|:------------------------|:----------------|:---------------------------------------------------------|
| NAT Gateway | 必須 | EIPがなければ、インターネットにアクセスできない|
| EC2（Public　Subnet） | 任意 | EIPがない場合、AWSが任意パブリックIPを割り当てる。EIPがある場合、EIPが固定なパブリックIPを割り当てる。　|
| EC2（Private　Subnet）  | ✖ | インターネットにアクセスするときに必ずNATGWに頼る |
| ALB/IGW/Route53 | ✖ | 独自のパブリックネットワーク機構やホスティング層を持つ |


⑷　IGWの説明：
　　VPC（Virtual Private Cloud）とインターネット（Internet）を接続するゲートウェイ（Gateway）であり、
　　パブリックIP（Public　IP）のトラフィック（Traffic）しか認識出来ません。

